openapi: 3.0.0
info:
  title: WEBSERVICE-NODE-PESSOA
  description: API para Entidades com Node.js e TypeORM
  version: 1.0.0

paths:
  /pessoa:
    get:
      summary: Lista todas as pessoas
      responses:
        "200":
          $ref: '#/components/responses/Sucesso'
        "400":
          $ref: '#/components/responses/Erro'
    post:
      summary: Cria uma nova pessoa
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PessoaNova'
      responses:
        "201":
          $ref: '#/components/responses/Criado'
        "400":
          $ref: '#/components/responses/Erro'

  /pessoa/{id}:
    get:
      summary: Busca por filtro, uma Pessoa por ID
      parameters:
        - name: id
          description: O ID numérico do Pessoa
          in: path
          required: true
          schema:
            type: integer
            format: int64
      responses:
        "200":
          $ref: '#/components/responses/Sucesso'
        "404":
          $ref: '#/components/responses/Erro'

  /pessoa/cpf/{cpf}:
    get:
      summary: Busca por filtro, uma Pessoa por CPF
      parameters:
        - name: cpf
          description: CPF sem pontuação (11 dígitos)
          in: path
          required: true
          schema:
            type: string
            pattern: '^[0-9]{11}$'
            minLength: 11
            maxLength: 11
          example: "79110377022"
      responses:
        "200":
          $ref: '#/components/responses/Sucesso'
        "404":
          $ref: '#/components/responses/Erro'

  /endereco:
    get:
      summary: Lista todas os Endereços
      responses:
        "200":
          $ref: '#/components/responses/Sucesso'
        "400":
          $ref: '#/components/responses/Erro'
    post:
      summary: Cria uma novo Endereco
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnderecoNovo'
      responses:
        "201":
          $ref: '#/components/responses/Criado'
        "400":
          $ref: '#/components/responses/Erro'

  /endereco/{id}:
    put:
      summary: Atualiza o Endereco
      parameters:
        - name: id
          description: O ID numérico do Endereco
          in: path
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnderecoAtual'
      responses:
        "201":
          $ref: '#/components/responses/Atualizado'
        "400":
          $ref: '#/components/responses/Erro'

components:
  schemas:
    PessoaNova:
      type: object
      required:
        - nomePessoa
        - indicadorPessoa
        - cpf
        - dataNascimento
        - cep
      properties:
        nomePessoa:
          description: Nome completo da pessoa
          type: string
          maxLength: 100
          example: "Fulano de Tal"
        statusAtivo:
          description: Indica se o registro está ativo
          type: boolean
          default: true
        indicadorPessoa:
          description: Tipo de pessoa (Fisica ou Juridica)
          type: string
          enum: [F, J] # Substitua pelos valores reais do seu Enum
          default: F
        cpf:
          description: CPF sem pontuação (11 dígitos)
          type: string
          pattern: '^[0-9]{11}$'
          minLength: 11
          maxLength: 11          
          example: "79110377022"
        dataNascimento:
          description: Data de nascimento no formato YYYY-MM-DD
          type: string
          format: date
          example: "1990-05-15"
        email:
          description: Email para contacto
          type: string
          example: "FulanoTal@dominio.com.br"
        complemento:
          description: Informações adicionais (quadra, lote, edificio, apartamento, bloco, etc.)
          type: string
          maxLength: 100
          nullable: true
          example: "Bloco B, Apto 201"
        cep:
          description: Código de Endereçamento Postal - Numérico de 8 dígitos (sem pontuação)
          type: string
          pattern: '^[0-9]{8}$'
          minLength: 8
          maxLength: 8          
          example: 74000001

    PessoaAtual:
      type: object
      required:
        - cpf
      properties:
        nomePessoa:
          description: Nome completo da pessoa
          type: string
          maxLength: 100
          example: "Fulano de Tal"
        statusAtivo:
          description: Indica se o registro está ativo
          type: boolean
          default: true
        indicadorPessoa:
          description: Tipo de pessoa (Fisica ou Juridica)
          type: string
          enum: [F, J] # Substitua pelos valores reais do seu Enum
          default: F
        cpf:
          description: CPF sem pontuação (11 dígitos)
          type: string
          pattern: '^[0-9]{11}$'
          minLength: 11
          maxLength: 11          
          example: "79110377022"
        dataNascimento:
          description: Data de nascimento no formato YYYY-MM-DD
          type: string
          format: date
          example: "1990-05-15"
        email:
          description: Email para contacto
          type: string
          example: "FulanoTal@dominio.com.br"
        complemento:
          description: Informações adicionais (quadra, lote, edificio, apartamento, bloco, etc.)
          type: string
          maxLength: 100
          nullable: true
          example: "Bloco B, Apto 201"
        cep:
          description: Código de Endereçamento Postal - Numérico de 8 dígitos (sem pontuação)
          type: string
          pattern: '^[0-9]{8}$'
          minLength: 8
          maxLength: 8          
          example: 74000001

    EnderecoNovo:
      type: object
      required:
        - cep
        - logradouro
        - cidade
        - estado
      properties:
        cep:
          description: Código de Endereçamento Postal - Numérico de 8 dígitos (sem pontuação)
          type: string
          pattern: '^[0-9]{8}$'
          minLength: 8
          maxLength: 8          
          example: 74000001
        logradouro:
          description: Nome de ruas, avenidas, praças, etc.
          type: string
          maxLength: 100
          example: "Avenida Central"
        cidade:
          description: Nome de cidade
          type: string
          maxLength: 100
          example: "Goiânia"
        estado:
          description: Sigla da Unidade Federativa (UF)
          type: string
          minLength: 2
          maxLength: 2
          example: "GO"

    EnderecoAtual:
      type: object
      required:
        - cep
      properties:
        cep:
          description: Código de Endereçamento Postal - Numérico de 8 dígitos (sem pontuação)
          type: string
          pattern: '^[0-9]{8}$'
          minLength: 8
          maxLength: 8          
          example: 74000001
        logradouro:
          description: Nome de ruas, avenidas, praças, etc.
          type: string
          maxLength: 100
          example: "Avenida Central"
        cidade:
          description: Nome de cidade
          type: string
          maxLength: 100
          example: "Goiânia"
        estado:
          description: Sigla da Unidade Federativa (UF)
          type: string
          minLength: 2
          maxLength: 2
          example: "GO"

    ErrorResponse:
      type: object
      properties:
        code:
            description: Código numérico do erro
            type: integer
        message:
            description: Mensagem de erro legível
            type: string
        details:
            description: Lista de detalhes adicionais sobre o erro
            type: array
            items:
              type: string

  responses:
    Sucesso:
      description: Operação realizada com sucesso
    Criado:
      description: Recurso criado com sucesso
    Atualizado:
      description: Recurso atualizado com sucesso
    Erro:
      description: Ocorreu um erro inesperado
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
